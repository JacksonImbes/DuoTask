(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{577:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/task/[id]",function(){return n(2680)}])},8498:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var r=n(5893),o=n(8369),i=n.n(o);function s(e){let{...t}=e;return(0,r.jsx)("textarea",{className:i().textarea,...t})}},2680:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return v},default:function(){return h}});var r=n(5893),o=n(7294),i=n(3299),s=n(9008),l=n.n(s),a=n(13),c=n.n(a),u=n(6761),m=n(6100),d=n(8498),f=n(2091),v=!0;function h(e){let{item:t,allComments:n}=e,{data:s}=(0,i.useSession)(),[a,v]=(0,o.useState)(""),[h,b]=(0,o.useState)(n||[]);async function p(e){var n,r,o,i,l,c;if(e.preventDefault(),""!==a&&(null==s?void 0:null===(n=s.user)||void 0===n?void 0:n.email)&&(null==s?void 0:null===(r=s.user)||void 0===r?void 0:r.name))try{let e=(0,u.h)(),n={id:(await (0,m.ET)((0,m.hJ)(e,"comments"),{comment:a,created:new Date,user:null==s?void 0:null===(o=s.user)||void 0===o?void 0:o.email,name:null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.name,taskId:null==t?void 0:t.taskId})).id,comment:a,user:null==s?void 0:null===(l=s.user)||void 0===l?void 0:l.email,name:null==s?void 0:null===(c=s.user)||void 0===c?void 0:c.name,taskId:null==t?void 0:t.taskId};b(e=>[...e,n]),v("")}catch(e){console.log(e)}}async function y(e){try{let t=(0,u.h)(),n=(0,m.JU)(t,"comments",e);await (0,m.oe)(n);let r=h.filter(t=>t.id!==e);b(r)}catch(e){console.log(e)}}return(0,r.jsxs)("div",{className:c().container,children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Detalhes da tarefa"})}),(0,r.jsxs)("main",{className:c().main,children:[(0,r.jsx)("h1",{children:"Tarefa"}),(0,r.jsx)("article",{className:c().task,children:(0,r.jsx)("p",{children:null==t?void 0:t.tarefa})})]}),(0,r.jsxs)("section",{className:c().commentsContainer,children:[(0,r.jsx)("h2",{children:"Deixar coment\xe1rio"}),(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsx)(d.g,{placeholder:"Digite seu coment\xe1rio...",value:a,onChange:e=>v(e.target.value)}),(0,r.jsx)("button",{disabled:!(null==s?void 0:s.user),className:c().button,children:"Enviar coment\xe1rio"})]})]}),(0,r.jsxs)("section",{className:c().commentsContainer,children:[(0,r.jsx)("h2",{children:"Todos coment\xe1rios"}),0===h.length&&(0,r.jsx)("span",{children:"Nenhum coment\xe1rio foi encontrado..."}),h.map(e=>{var t;return(0,r.jsxs)("article",{className:c().comment,children:[(0,r.jsxs)("div",{className:c().headComment,children:[(0,r.jsx)("label",{className:c().commentsLabel,children:e.name}),e.user===(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.email)&&(0,r.jsx)("button",{className:c().buttonTrash,onClick:()=>y(e.id),children:(0,r.jsx)(f.Xm5,{size:18,color:"#ea3140"})})]}),(0,r.jsx)("p",{children:e.comment})]},e.id)})]})]})}},8369:function(e){e.exports={textarea:"styles_textarea__VWHbl"}},13:function(e){e.exports={container:"styles_container__1HnUp",main:"styles_main___1ruP",task:"styles_task__AhZaS",commentsContainer:"styles_commentsContainer__Qw33g",button:"styles_button__kIYMT",comment:"styles_comment__twTuK",headComment:"styles_headComment__8lCwI",commentsLabel:"styles_commentsLabel__QOjTQ",buttonTrash:"styles_buttonTrash__74VoX"}},9008:function(e,t,n){e.exports=n(6665)},5054:function(e,t,n){"use strict";n.d(t,{w_:function(){return u}});var r=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=r.createContext&&r.createContext(o),s=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return t=>r.createElement(m,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,c({key:n},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var n,{attr:o,size:i,title:a}=e,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),m=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:n,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==i?r.createElement(i.Consumer,null,e=>t(e)):t(o)}}},function(e){e.O(0,[365,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);