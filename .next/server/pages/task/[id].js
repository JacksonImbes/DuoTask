(()=>{var e={};e.id=198,e.ids=[198,888,660],e.modules={6415:e=>{e.exports={header:"styles_header__7sfJ0",content:"styles_content__9X7OX",logo:"styles_logo__t64BP",loginButton:"styles_loginButton__j6lEx",nav:"styles_nav__Ewldv",link:"styles_link___WqYd"}},5593:e=>{e.exports={textarea:"styles_textarea__VWHbl"}},7753:e=>{e.exports={container:"styles_container__1HnUp",main:"styles_main___1ruP",task:"styles_task__AhZaS",commentsContainer:"styles_commentsContainer__Qw33g",button:"styles_button__kIYMT",comment:"styles_comment__twTuK",headComment:"styles_headComment__8lCwI",commentsLabel:"styles_commentsLabel__QOjTQ",buttonTrash:"styles_buttonTrash__74VoX"}},5552:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>x,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>_,routeModule:()=>y,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>g});var r=s(7093),n=s(5244),i=s(1323),o=s(29),l=s(5143),c=s(2680),d=e([l,c]);[l,c]=d.then?(await d)():d;let u=(0,i.l)(c,"default"),m=(0,i.l)(c,"getStaticProps"),h=(0,i.l)(c,"getStaticPaths"),p=(0,i.l)(c,"getServerSideProps"),x=(0,i.l)(c,"config"),_=(0,i.l)(c,"reportWebVitals"),g=(0,i.l)(c,"unstable_getStaticProps"),j=(0,i.l)(c,"unstable_getStaticPaths"),b=(0,i.l)(c,"unstable_getStaticParams"),f=(0,i.l)(c,"unstable_getServerProps"),S=(0,i.l)(c,"unstable_getServerSideProps"),y=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/task/[id]",pathname:"/task/[id]",bundlePath:"",filename:""},components:{App:l.default,Document:o.default},userland:c});a()}catch(e){a(e)}})},9605:(e,t,s)=>{"use strict";s.d(t,{h:()=>c});var a=s(997),r=s(1649),n=s(6415),i=s.n(n),o=s(1664),l=s.n(o);function c(){let{data:e,status:t}=(0,r.useSession)();return a.jsx("header",{className:i().header,children:(0,a.jsxs)("section",{className:i().content,children:[(0,a.jsxs)("nav",{className:i().nav,children:[a.jsx(l(),{href:"/",children:(0,a.jsxs)("h1",{className:i().logo,children:["DuoTask",a.jsx("span",{children:"+"})]})}),e?.user&&a.jsx(l(),{href:"/dashboard",className:i().link,children:"Meu Painel"})]}),"loading"===t?a.jsx(a.Fragment,{}):e?(0,a.jsxs)("button",{className:i().loginButton,onClick:()=>(0,r.signOut)(),children:["Ol\xe1 ",e?.user?.name]}):a.jsx("button",{className:i().loginButton,onClick:()=>(0,r.signIn)("google"),children:"Acessar"})]})})}},8498:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(997),r=s(5593),n=s.n(r);function i({...e}){return a.jsx("textarea",{className:n().textarea,...e})}},5143:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>c});var r=s(997);s(6764);var n=s(9605),i=s(1649),o=s(371),l=e([o]);function c({Component:e,pageProps:t}){return(0,r.jsxs)(i.SessionProvider,{session:t.session,children:[r.jsx(n.h,{}),r.jsx(e,{...t})]})}o=(l.then?(await l)():l)[0],(0,o.m)(),a()}catch(e){a(e)}})},29:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(997),r=s(6859);function n(){return(0,a.jsxs)(r.Html,{lang:"en",children:[a.jsx(r.Head,{}),(0,a.jsxs)("body",{children:[a.jsx(r.Main,{}),a.jsx(r.NextScript,{})]})]})}},2680:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>_,getServerSideProps:()=>g});var r=s(997),n=s(6689),i=s(1649),o=s(968),l=s.n(o),c=s(7753),d=s.n(c),u=s(371),m=s(1492),h=s(8498),p=s(2091),x=e([u,m]);function _({item:e,allComments:t}){let{data:s}=(0,i.useSession)(),[a,o]=(0,n.useState)(""),[c,x]=(0,n.useState)(t||[]);async function _(t){if(t.preventDefault(),""!==a&&s?.user?.email&&s?.user?.name)try{let t=(0,u.h)(),r={id:(await (0,m.addDoc)((0,m.collection)(t,"comments"),{comment:a,created:new Date,user:s?.user?.email,name:s?.user?.name,taskId:e?.taskId})).id,comment:a,user:s?.user?.email,name:s?.user?.name,taskId:e?.taskId};x(e=>[...e,r]),o("")}catch(e){console.log(e)}}async function g(e){try{let t=(0,u.h)(),s=(0,m.doc)(t,"comments",e);await (0,m.deleteDoc)(s);let a=c.filter(t=>t.id!==e);x(a)}catch(e){console.log(e)}}return(0,r.jsxs)("div",{className:d().container,children:[r.jsx(l(),{children:r.jsx("title",{children:"Detalhes da tarefa"})}),(0,r.jsxs)("main",{className:d().main,children:[r.jsx("h1",{children:"Tarefa"}),r.jsx("article",{className:d().task,children:r.jsx("p",{children:e?.tarefa})})]}),(0,r.jsxs)("section",{className:d().commentsContainer,children:[r.jsx("h2",{children:"Deixar coment\xe1rio"}),(0,r.jsxs)("form",{onSubmit:_,children:[r.jsx(h.g,{placeholder:"Digite seu coment\xe1rio...",value:a,onChange:e=>o(e.target.value)}),r.jsx("button",{disabled:!s?.user,className:d().button,children:"Enviar coment\xe1rio"})]})]}),(0,r.jsxs)("section",{className:d().commentsContainer,children:[r.jsx("h2",{children:"Todos coment\xe1rios"}),0===c.length&&r.jsx("span",{children:"Nenhum coment\xe1rio foi encontrado..."}),c.map(e=>(0,r.jsxs)("article",{className:d().comment,children:[(0,r.jsxs)("div",{className:d().headComment,children:[r.jsx("label",{className:d().commentsLabel,children:e.name}),e.user===s?.user?.email&&r.jsx("button",{className:d().buttonTrash,onClick:()=>g(e.id),children:r.jsx(p.Xm5,{size:18,color:"#ea3140"})})]}),r.jsx("p",{children:e.comment})]},e.id))]})]})}[u,m]=x.then?(await x)():x;let g=async({params:e})=>{let t=e?.id,s=(0,u.h)(),a=(0,m.doc)(s,"tarefas",t),r=(0,m.query)((0,m.collection)(s,"comments"),(0,m.where)("taskId","==",t)),n=await (0,m.getDocs)(r),i=[];n.forEach(e=>{i.push({id:e.id,comment:e.data().comment,user:e.data().user,name:e.data().name,taskId:e.data().taskId})}),console.log(i);let o=await (0,m.getDoc)(a);if(void 0===o.data()||!o.data()?.public)return{redirect:{destination:"/",permanent:!1}};let l=o.data()?.created?.seconds*1e3,c={tarefa:o.data()?.tarefa,public:o.data()?.public,created:new Date(l).toLocaleDateString(),user:o.data()?.user,taskId:t};return console.log(c),{props:{item:c,allComments:i}}};a()}catch(e){a(e)}})},371:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{let o;s.d(t,{h:()=>u,m:()=>d});var r=s(3745),n=s(1492),i=e([r,n]);[r,n]=i.then?(await i)():i;let l={apiKey:"AIzaSyD6VeNcGMHOQIoLXi7FSEemw7-AhjUDySM",authDomain:"duotask-plus.firebaseapp.com",projectId:"duotask-plus",storageBucket:"duotask-plus.appspot.com",messagingSenderId:"803071142357",appId:"803071142357:web:9d26cf888633ac9dc4b55c"},c=null,d=()=>{o||(o=(0,r.initializeApp)(l),console.log("Firebase inicializado com sucesso!"))},u=()=>{if(!o)throw console.error("Firebase app not initialized"),Error("Firebase app not initialized");return c||(c=(0,n.getFirestore)(o)),c};a()}catch(e){a(e)}})},6764:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},3745:e=>{"use strict";e.exports=import("firebase/app")},1492:e=>{"use strict";e.exports=import("firebase/firestore")},1017:e=>{"use strict";e.exports=require("path")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[348,859,664,767],()=>s(5552));module.exports=a})();